"use strict";var ctx=document.getElementById("myChart").getContext("2d"),bitcoinTag=document.getElementById("btc-tag"),buyInput=document.getElementById("buyInput"),sellInput=document.getElementById("sellInput"),buyButton=document.getElementById("buyButton"),sellButton=document.getElementById("sellButton"),moneyTag=document.getElementById("money-tag"),userBtcTag=document.getElementById("btc-user-tag"),minBtc=document.getElementById("min-btc-tag"),maxBtc=document.getElementById("max-btc-tag"),labelsUpper=1,bitcoinStartValue=0,userMoney=1500,userBitcoin=0,minBtcPrice=bitcoinStartValue,maxBtcPrice=bitcoinStartValue;fetch("https://api.coindesk.com/v1/bpi/currentprice.json").then(function(t){return t.json()}).then(function(t){bitcoinStartValue=t.bpi.USD.rate_float,bitcoinStartValue=Math.floor(bitcoinStartValue),bitcoinTag.textContent=bitcoinStartValue,minBtc.textContent=bitcoinStartValue,maxBtc.textContent=bitcoinStartValue,maxBtcPrice=minBtcPrice=bitcoinStartValue}),moneyTag.textContent=userMoney,userBtcTag.textContent=userBitcoin;var myChart=new Chart(ctx,{type:"line",data:{labels:[labelsUpper],datasets:[{data:[bitcoinStartValue],backgroundColor:["rgba(33,150,243 ,0.3)"],borderColor:["rgba(33,150,243 ,1)"],borderWidth:2}]},options:{maintainAspectRatio:!1,responsive:!0,legend:{display:!1},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}),buyBitcoin=function(){buyInput.value<=userMoney?(userBitcoin+=buyInput.value/bitcoinStartValue,userBitcoin=Math.round(1e3*userBitcoin)/1e3,userMoney-=buyInput.value,userMoney=Math.round(100*userMoney)/100,moneyTag.textContent=userMoney,userBtcTag.textContent=userBitcoin,buyInput.value=""):buyInput.classList.add("wrong-inp")},sellBitcoin=function(){sellInput.value<=userBitcoin?(userMoney+=sellInput.value*bitcoinStartValue,userBitcoin-=sellInput.value,userBitcoin=Math.round(1e3*userBitcoin)/1e3,userMoney=Math.round(100*userMoney)/100,moneyTag.textContent=userMoney,userBtcTag.textContent=userBitcoin,sellInput.value=""):sellInput.classList.add("wrong-inp")},formWalidationBuy=function(){buyInput.classList.forEach(function(t){"wrong-inp"===t&&buyInput.classList.remove("wrong-inp")})},formWalidationSell=function(){sellInput.classList.forEach(function(t){"wrong-inp"===t&&sellInput.classList.remove("wrong-inp")})};buyInput.addEventListener("click",formWalidationBuy),sellInput.addEventListener("click",formWalidationSell),buyButton.addEventListener("click",buyBitcoin),sellButton.addEventListener("click",sellBitcoin),setInterval(function(){labelsUpper++;var t=bitcoinStartValue,e=1.4,n=.7;25e3<bitcoinStartValue&&(e=1.25,e=.55),bitcoinStartValue<1500&&(e=1.6,n=.8);var a=Math.random()*(e-n)+n;bitcoinStartValue=Math.floor(bitcoinStartValue*a),bitcoinTag.textContent=bitcoinStartValue,bitcoinTag.style.color=t<bitcoinStartValue?"#4CAF50":"#f44336",maxBtcPrice<bitcoinStartValue?(maxBtcPrice=bitcoinStartValue,maxBtc.textContent=bitcoinStartValue):bitcoinStartValue<minBtcPrice&&(minBtcPrice=bitcoinStartValue,minBtc.textContent=bitcoinStartValue),myChart.data.labels.push(labelsUpper),myChart.data.datasets[0].data.push(bitcoinStartValue),40<=myChart.data.labels.length&&(myChart.data.labels.shift(),myChart.data.datasets[0].data.shift()),myChart.update()},2e3);